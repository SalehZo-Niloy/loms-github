<app-loms-layout
  organisationName="Loan Origination and Management System"
  solutionName="LOMS"
  breadcrumb="Loan KYC Profiling"
  basePath="/loms"
>
  <div class="px-2 py-4 bg-white-50 min-h-screen space-y-4 w-full flex-1 max-w-screen-xl mx-auto">
    <div class="flex items-center justify-between">
      <div class="space-y-1">
        <h1 class="text-2xl font-semibold text-slate-900">
          Loan KYC Profiling: {{ item?.applicant }}
        </h1>
        <div class="text-xs text-slate-500">
          App ID:
          <span class="font-medium text-slate-800">{{ item?.appId }}</span>
        </div>
      </div>
      <a
        routerLink="/loms/kyc"
        class="inline-flex items-center rounded-md border border-slate-300 bg-white px-3 py-1.5 text-xs font-medium text-slate-700"
      >
        Back to List
      </a>
    </div>

    <div class="grid gap-4 md:grid-cols-[minmax(0,3fr)_minmax(0,1fr)]">
      <div class="space-y-4">
        <div class="rounded-2xl border border-slate-200 bg-white p-4 shadow-sm text-sm text-slate-800 space-y-2">
          <div class="flex items-center justify-between">
            <div class="text-sm font-semibold text-slate-900">
              Applicant Summary
            </div>
            <div class="text-xs text-slate-600">
              NID: <span class="font-medium text-slate-800">0987654321</span>
              <span class="mx-1 text-slate-400">|</span>
              Mobile: <span class="font-medium text-slate-800">01722222222</span>
            </div>
          </div>
          <div class="grid gap-3 md:grid-cols-3">
            <div>
              <div class="text-xs text-slate-500">Applicant</div>
              <div class="font-medium text-slate-900">
                {{ item?.applicant }}
              </div>
            </div>
            <div>
              <div class="text-xs text-slate-500">Product</div>
              <div class="font-medium text-slate-900">
                {{ item?.product }}
              </div>
            </div>
            <div>
              <div class="text-xs text-slate-500">Application ID</div>
              <div class="font-medium text-slate-900">
                {{ item?.appId }}
              </div>
            </div>
          </div>
        </div>

        <div class="space-y-4 text-xs">
          <div class="rounded-2xl border border-slate-200 bg-white p-4 shadow-sm space-y-3">
            <div class="text-sm font-semibold text-slate-900">
              1. Eligibility &amp; Screening
            </div>
            <div class="grid gap-3 md:grid-cols-2 lg:grid-cols-4">
              <div class="space-y-1">
                <label class="block font-medium text-slate-700">
                  Target Segment *
                </label>
                <select
                  class="w-full rounded-md border border-slate-300 bg-white px-2 py-1.5 text-xs text-slate-800 focus:outline-none focus:ring-2 focus:ring-blue-100 focus:border-blue-300"
                  [(ngModel)]="targetSegment"
                >
                  <option value="">Select...</option>
                  <option value="Salaried">Salaried</option>
                  <option value="Self-Employed">Self-Employed</option>
                  <option value="Business">Business</option>
                  <option value="Student">Student</option>
                </select>
              </div>
              <div class="space-y-1">
                <label class="block font-medium text-slate-700">
                  Is Applicant 18-65 years old? *
                </label>
                <select
                  class="w-full rounded-md border border-slate-300 bg-white px-2 py-1.5 text-xs text-slate-800 focus:outline-none focus:ring-2 focus:ring-blue-100 focus:border-blue-300"
                  [(ngModel)]="ageRangeOk"
                >
                  <option value="">Select...</option>
                  <option value="Yes">Yes</option>
                  <option value="No">No</option>
                </select>
              </div>
              <div class="space-y-1">
                <label class="block font-medium text-slate-700">
                  Is Existing Customer? *
                </label>
                <select
                  class="w-full rounded-md border border-slate-300 bg-white px-2 py-1.5 text-xs text-slate-800 focus:outline-none focus:ring-2 focus:ring-blue-100 focus:border-blue-300"
                  [(ngModel)]="existingCustomer"
                >
                  <option value="">Select...</option>
                  <option value="Yes">Yes</option>
                  <option value="No">No</option>
                </select>
              </div>
              <div class="space-y-1">
                <label class="block font-medium text-slate-700">
                  Credit Bureau Status *
                </label>
                <select
                  class="w-full rounded-md border border-slate-300 bg-white px-2 py-1.5 text-xs text-slate-800 focus:outline-none focus:ring-2 focus:ring-blue-100 focus:border-blue-300"
                  [(ngModel)]="creditStatus"
                >
                  <option value="">Select...</option>
                  <option value="Clean">Clean</option>
                  <option value="Defaulted">Defaulted</option>
                  <option value="No Record">No Record</option>
                  <option value="Dispute">Dispute</option>
                </select>
              </div>
            </div>
          </div>

          <div class="rounded-2xl border border-slate-200 bg-white p-4 shadow-sm space-y-3">
            <div class="text-sm font-semibold text-slate-900">
              2. Demographic Information
            </div>
            <div class="grid gap-3 md:grid-cols-2 lg:grid-cols-3">
              <div class="space-y-1">
                <label class="block font-medium text-slate-700">
                  Full Legal Name *
                </label>
                <input
                  type="text"
                  class="w-full rounded-md border border-slate-300 bg-white px-2 py-1.5 text-xs text-slate-800 focus:outline-none focus:ring-2 focus:ring-blue-100 focus:border-blue-300"
                  [(ngModel)]="fullName"
                />
              </div>
              <div class="space-y-1">
                <label class="block font-medium text-slate-700">
                  Date of Birth *
                </label>
                <input
                  type="date"
                  class="w-full rounded-md border border-slate-300 bg-white px-2 py-1.5 text-xs text-slate-800 focus:outline-none focus:ring-2 focus:ring-blue-100 focus:border-blue-300"
                  [(ngModel)]="dateOfBirth"
                />
              </div>
              <div class="space-y-1">
                <label class="block font-medium text-slate-700">
                  Gender *
                </label>
                <select
                  class="w-full rounded-md border border-slate-300 bg-white px-2 py-1.5 text-xs text-slate-800 focus:outline-none focus:ring-2 focus:ring-blue-100 focus:border-blue-300"
                  [(ngModel)]="gender"
                >
                  <option value="">Select...</option>
                  <option value="Male">Male</option>
                  <option value="Female">Female</option>
                  <option value="Other">Other</option>
                </select>
              </div>
              <div class="space-y-1">
                <label class="block font-medium text-slate-700">
                  Nationality *
                </label>
                <input
                  type="text"
                  class="w-full rounded-md border border-slate-300 bg-white px-2 py-1.5 text-xs text-slate-800 focus:outline-none focus:ring-2 focus:ring-blue-100 focus:border-blue-300"
                  [(ngModel)]="nationality"
                />
              </div>
              <div class="space-y-1">
                <label class="block font-medium text-slate-700">
                  Education Level
                </label>
                <select
                  class="w-full rounded-md border border-slate-300 bg-white px-2 py-1.5 text-xs text-slate-800 focus:outline-none focus:ring-2 focus:ring-blue-100 focus:border-blue-300"
                  [(ngModel)]="educationLevel"
                >
                  <option value="">Select...</option>
                  <option value="High School">High School</option>
                  <option value="Bachelor">Bachelor</option>
                  <option value="Master">Master</option>
                  <option value="PhD">PhD</option>
                  <option value="None">None</option>
                </select>
              </div>
              <div class="space-y-1">
                <label class="block font-medium text-slate-700">
                  Occupation / Profession *
                </label>
                <input
                  type="text"
                  class="w-full rounded-md border border-slate-300 bg-white px-2 py-1.5 text-xs text-slate-800 focus:outline-none focus:ring-2 focus:ring-blue-100 focus:border-blue-300"
                  [(ngModel)]="occupation"
                />
              </div>
            </div>
          </div>

          <div class="rounded-2xl border border-slate-200 bg-white p-4 shadow-sm space-y-3">
            <div class="text-sm font-semibold text-slate-900">
              3. Address &amp; Residency
            </div>
            <div class="grid gap-3 md:grid-cols-2 lg:grid-cols-3">
              <div class="space-y-1">
                <label class="block font-medium text-slate-700">
                  Residence Type *
                </label>
                <select
                  class="w-full rounded-md border border-slate-300 bg-white px-2 py-1.5 text-xs text-slate-800 focus:outline-none focus:ring-2 focus:ring-blue-100 focus:border-blue-300"
                  [(ngModel)]="residenceType"
                >
                  <option value="">Select...</option>
                  <option value="Owned">Owned</option>
                  <option value="Rented">Rented</option>
                  <option value="Parents">Parents</option>
                  <option value="Company Provided">Company Provided</option>
                </select>
              </div>
              <div class="space-y-1">
                <label class="block font-medium text-slate-700">
                  Years at Current Address *
                </label>
                <input
                  type="number"
                  class="w-full rounded-md border border-slate-300 bg-white px-2 py-1.5 text-xs text-slate-800 focus:outline-none focus:ring-2 focus:ring-blue-100 focus:border-blue-300"
                  [(ngModel)]="yearsAtAddress"
                />
              </div>
              <div class="space-y-1 md:col-span-2">
                <label class="block font-medium text-slate-700">
                  Present Address *
                </label>
                <textarea
                  rows="2"
                  class="w-full rounded-md border border-slate-300 bg-white px-2 py-1.5 text-xs text-slate-800 focus:outline-none focus:ring-2 focus:ring-blue-100 focus:border-blue-300"
                  [(ngModel)]="presentAddress"
                ></textarea>
              </div>
              <div class="space-y-1 md:col-span-2">
                <label class="block font-medium text-slate-700">
                  Permanent Address *
                </label>
                <textarea
                  rows="2"
                  class="w-full rounded-md border border-slate-300 bg-white px-2 py-1.5 text-xs text-slate-800 focus:outline-none focus:ring-2 focus:ring-blue-100 focus:border-blue-300"
                  [(ngModel)]="permanentAddress"
                ></textarea>
              </div>
              <div class="space-y-1">
                <label class="block font-medium text-slate-700">
                  Permanent same as Present?
                </label>
                <select
                  class="w-full rounded-md border border-slate-300 bg-white px-2 py-1.5 text-xs text-slate-800 focus:outline-none focus:ring-2 focus:ring-blue-100 focus:border-blue-300"
                  [(ngModel)]="permanentSame"
                >
                  <option value="">Select...</option>
                  <option value="Yes">Yes</option>
                  <option value="No">No</option>
                </select>
              </div>
              <div class="space-y-1">
                <label class="block font-medium text-slate-700">
                  Preferred Mailing Address *
                </label>
                <select
                  class="w-full rounded-md border border-slate-300 bg-white px-2 py-1.5 text-xs text-slate-800 focus:outline-none focus:ring-2 focus:ring-blue-100 focus:border-blue-300"
                  [(ngModel)]="mailingAddress"
                >
                  <option value="">Select...</option>
                  <option value="Present">Present</option>
                  <option value="Permanent">Permanent</option>
                  <option value="Office">Office</option>
                </select>
              </div>
            </div>
          </div>

          <div class="rounded-2xl border border-slate-200 bg-white p-4 shadow-sm space-y-3">
            <div class="text-sm font-semibold text-slate-900">
              4. Financial Profile
            </div>
            <div class="grid gap-3 md:grid-cols-2 lg:grid-cols-3">
              <div class="space-y-1">
                <label class="block font-medium text-slate-700">
                  Primary Source of Funds *
                </label>
                <select
                  class="w-full rounded-md border border-slate-300 bg-white px-2 py-1.5 text-xs text-slate-800 focus:outline-none focus:ring-2 focus:ring-blue-100 focus:border-blue-300"
                  [(ngModel)]="sourceOfFunds"
                >
                  <option value="">Select...</option>
                  <option value="Salary">Salary</option>
                  <option value="Business Income">Business Income</option>
                  <option value="Remittance">Remittance</option>
                  <option value="Investment">Investment</option>
                  <option value="Inheritance">Inheritance</option>
                </select>
              </div>
              <div class="space-y-1">
                <label class="block font-medium text-slate-700">
                  Gross Monthly Income *
                </label>
                <input
                  type="number"
                  class="w-full rounded-md border border-slate-300 bg-white px-2 py-1.5 text-xs text-slate-800 focus:outline-none focus:ring-2 focus:ring-blue-100 focus:border-blue-300"
                  [(ngModel)]="grossMonthlyIncome"
                />
              </div>
              <div class="space-y-1">
                <label class="block font-medium text-slate-700">
                  Total Monthly Expenses *
                </label>
                <input
                  type="number"
                  class="w-full rounded-md border border-slate-300 bg-white px-2 py-1.5 text-xs text-slate-800 focus:outline-none focus:ring-2 focus:ring-blue-100 focus:border-blue-300"
                  [(ngModel)]="totalMonthlyExpenses"
                />
              </div>
              <div class="space-y-1">
                <label class="block font-medium text-slate-700">
                  Tax Identification No (TIN)
                </label>
                <input
                  type="text"
                  class="w-full rounded-md border border-slate-300 bg-white px-2 py-1.5 text-xs text-slate-800 focus:outline-none focus:ring-2 focus:ring-blue-100 focus:border-blue-300"
                  [(ngModel)]="tin"
                />
              </div>
              <div class="space-y-1">
                <label class="block font-medium text-slate-700">
                  Main Bank Name
                </label>
                <input
                  type="text"
                  class="w-full rounded-md border border-slate-300 bg-white px-2 py-1.5 text-xs text-slate-800 focus:outline-none focus:ring-2 focus:ring-blue-100 focus:border-blue-300"
                  [(ngModel)]="mainBankName"
                />
              </div>
            </div>
          </div>

          <div class="rounded-2xl border border-slate-200 bg-white p-4 shadow-sm space-y-3">
            <div class="text-sm font-semibold text-slate-900">
              5. Family &amp; Relationships
            </div>
            <div class="grid gap-3 md:grid-cols-2 lg:grid-cols-3">
              <div class="space-y-1">
                <label class="block font-medium text-slate-700">
                  Marital Status *
                </label>
                <select
                  class="w-full rounded-md border border-slate-300 bg-white px-2 py-1.5 text-xs text-slate-800 focus:outline-none focus:ring-2 focus:ring-blue-100 focus:border-blue-300"
                  [(ngModel)]="maritalStatus"
                >
                  <option value="">Select...</option>
                  <option value="Single">Single</option>
                  <option value="Married">Married</option>
                  <option value="Divorced">Divorced</option>
                  <option value="Widowed">Widowed</option>
                </select>
              </div>
              <div class="space-y-1">
                <label class="block font-medium text-slate-700">
                  Spouse Name
                </label>
                <input
                  type="text"
                  class="w-full rounded-md border border-slate-300 bg-white px-2 py-1.5 text-xs text-slate-800 focus:outline-none focus:ring-2 focus:ring-blue-100 focus:border-blue-300"
                  [(ngModel)]="spouseName"
                />
              </div>
              <div class="space-y-1">
                <label class="block font-medium text-slate-700">
                  No. of Dependents *
                </label>
                <input
                  type="number"
                  class="w-full rounded-md border border-slate-300 bg-white px-2 py-1.5 text-xs text-slate-800 focus:outline-none focus:ring-2 focus:ring-blue-100 focus:border-blue-300"
                  [(ngModel)]="dependents"
                />
              </div>
              <div class="space-y-1">
                <label class="block font-medium text-slate-700">
                  Next of Kin Name *
                </label>
                <input
                  type="text"
                  class="w-full rounded-md border border-slate-300 bg-white px-2 py-1.5 text-xs text-slate-800 focus:outline-none focus:ring-2 focus:ring-blue-100 focus:border-blue-300"
                  [(ngModel)]="nextOfKinName"
                />
              </div>
              <div class="space-y-1">
                <label class="block font-medium text-slate-700">
                  Relation with Next of Kin *
                </label>
                <input
                  type="text"
                  class="w-full rounded-md border border-slate-300 bg-white px-2 py-1.5 text-xs text-slate-800 focus:outline-none focus:ring-2 focus:ring-blue-100 focus:border-blue-300"
                  [(ngModel)]="relationWithNextOfKin"
                />
              </div>
            </div>
          </div>

          <div class="rounded-2xl border border-slate-200 bg-white p-4 shadow-sm space-y-3">
            <div class="text-sm font-semibold text-slate-900">
              6. Political &amp; Regulatory Screening
            </div>
            <div class="grid gap-3 md:grid-cols-2 lg:grid-cols-3">
              <div class="space-y-1">
                <label class="block font-medium text-slate-700">
                  PEP Status *
                </label>
                <select
                  class="w-full rounded-md border border-slate-300 bg-white px-2 py-1.5 text-xs text-slate-800 focus:outline-none focus:ring-2 focus:ring-blue-100 focus:border-blue-300"
                  [(ngModel)]="pepStatus"
                >
                  <option value="">Select...</option>
                  <option value="None">None</option>
                  <option value="PEP (Self)">PEP (Self)</option>
                  <option value="PEP (Family/Associate)">PEP (Family/Associate)</option>
                </select>
              </div>
              <div class="space-y-1">
                <label class="block font-medium text-slate-700">
                  Sanctions Screening Result *
                </label>
                <select
                  class="w-full rounded-md border border-slate-300 bg-white px-2 py-1.5 text-xs text-slate-800 focus:outline-none focus:ring-2 focus:ring-blue-100 focus:border-blue-300"
                  [(ngModel)]="sanctionsResult"
                >
                  <option value="">Select...</option>
                  <option value="Clear">Clear</option>
                  <option value="Match Found">Match Found</option>
                  <option value="Pending">Pending</option>
                </select>
              </div>
              <div class="space-y-1">
                <label class="block font-medium text-slate-700">
                  FATCA / US Person? *
                </label>
                <select
                  class="w-full rounded-md border border-slate-300 bg-white px-2 py-1.5 text-xs text-slate-800 focus:outline:none focus:ring-2 focus:ring-blue-100 focus:border-blue-300"
                  [(ngModel)]="fatcaStatus"
                >
                  <option value="">Select...</option>
                  <option value="Yes">Yes</option>
                  <option value="No">No</option>
                </select>
              </div>
              <div class="space-y-1 md:col-span-2">
                <label class="block font-medium text-slate-700">
                  Country of Tax Residency *
                </label>
                <input
                  type="text"
                  class="w-full rounded-md border border-slate-300 bg-white px-2 py-1.5 text-xs text-slate-800 focus:outline-none focus:ring-2 focus:ring-blue-100 focus:border-blue-300"
                  [(ngModel)]="taxResidencyCountry"
                />
              </div>
            </div>
          </div>

          <div class="rounded-2xl border border-slate-200 bg-white p-4 shadow-sm space-y-3">
            <div class="text-sm font-semibold text-slate-900">
              Document Checklist
            </div>
            <div class="space-y-2 text-xs">
              <div class="flex items-center justify-between">
                <div class="flex items-center gap-2">
                  <input
                    type="checkbox"
                    class="h-3 w-3 rounded border-slate-300"
                    [(ngModel)]="nidProvided"
                  />
                  <span>NID Copy (Required)</span>
                </div>
                <span class="text-blue-700 font-semibold" *ngIf="nidProvided">
                  Provided
                </span>
              </div>
              <div class="flex items-center justify-between">
                <div class="flex items-center gap-2">
                  <input
                    type="checkbox"
                    class="h-3 w-3 rounded border-slate-300"
                    [(ngModel)]="utilityProvided"
                  />
                  <span>Utility Bill (Required)</span>
                </div>
                <span class="text-blue-700 font-semibold" *ngIf="utilityProvided">
                  Provided
                </span>
              </div>
              <div class="flex items-center justify-between">
                <div class="flex items-center gap-2">
                  <input
                    type="checkbox"
                    class="h-3 w-3 rounded border-slate-300"
                    [(ngModel)]="tinProvided"
                  />
                  <span>TIN Certificate</span>
                </div>
                <span class="text-blue-700 font-semibold" *ngIf="tinProvided">
                  Provided
                </span>
              </div>
            </div>
          </div>

          <div class="flex justify-end gap-3" *ngIf="!isChecker()">
            <button
              type="button"
              class="rounded-md border border-slate-300 px-4 py-2 text-xs font-medium text-slate-700"
              (click)="saveDraft()"
            >
              Save Draft
            </button>
            <button
              type="button"
              class="rounded-md bg-blue-600 px-4 py-2 text-xs font-semibold text-white hover:bg-blue-700"
              (click)="submitForApproval()"
            >
              Submit for Approval
            </button>
          </div>
          <div class="flex justify-end gap-3" *ngIf="isChecker()">
            <button
              type="button"
              class="rounded-md bg-blue-600 px-4 py-2 text-xs font-semibold text-white hover:bg-blue-700"
              (click)="approveKyc()"
            >
              Approve
            </button>
            <button
              type="button"
              class="rounded-md border border-slate-300 px-4 py-2 text-xs font-medium text-slate-700 hover:bg-slate-50"
              (click)="rejectKyc()"
            >
              Reject / Refer Back
            </button>
          </div>
        </div>
      </div>

      <div class="space-y-4">
        <div class="rounded-2xl border border-slate-200 bg-white p-4 shadow-sm text-sm">
          <div class="mb-3 text-sm font-semibold text-slate-900">
            Risk Assessment
          </div>
          <div class="flex flex-col items-center justify-center gap-2 py-4">
            <div class="text-4xl font-semibold text-slate-900">
              {{ riskScore }}
            </div>
            <div class="text-xs text-slate-500">
              Overall risk score (0â€“100)
            </div>
            <button
              type="button"
              class="mt-2 rounded-md border border-slate-300 px-3 py-1.5 text-xs font-medium text-slate-700 hover:bg-slate-50"
              (click)="recalculateRisk()"
            >
              Recalculate
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</app-loms-layout>
